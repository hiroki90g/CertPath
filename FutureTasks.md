# 8/10 面談後のネクストアクション - タスクチェックリスト

## 🗄️ データベース設計関連

### テーブル設計の統一
- [ ] **テーブル名の命名規則を統一する**
  - [ ] 複数形・単数形のどちらにするか決定
  - [ ] 既存テーブル名をルールに合わせて修正

- [ ] **カテゴリーテーブルの検討・追加**
  - [ ] 「カテゴリーから探す」機能要件に対応
  - [ ] カテゴリーテーブルの設計と実装

## 📊 ER図の詳細設計

- [ ] **ER図の記載範囲を明確化**
  - [ ] statusフィールドをenum型にするか検討・決定
  - [ ] 必要な項目と省略可能な項目の整理

- [ ] **計算項目の設計方針を決定**
  - [ ] progressPercentage を計算で求めるか、DBに保存するかの判断
  - [ ] パフォーマンス要件に応じた実装方針の確定

- [ ] **フォローユーザー機能のDB設計最適化**
  - [ ] JOIN処理の複雑さを回避する設計の検討
  - [ ] クエリ効率を考慮したテーブル構造の見直し

## 🚀 API設計・開発環境

### API仕様書の作成
- [ ] **OpenAPI仕様書の作成**
  - [ ] Swagger等でAPI仕様書を作成
  - [ ] YAML形式での仕様定義
  - [ ] OpenAPIからのコード自動生成の検討

### 開発環境構築
- [ ] **開発環境の構築**
  - [ ] Railway + Swagger の環境構築
  - [ ] 仕様書の表示確認

- [ ] **SuperBase設定**
  - [ ] リレーショナルデータベースとしてのSuperBase設定
  - [ ] 複数リレーションの実装

---

## 🎯 推奨順序
1. **データベース設計関連** → 他の作業のベースとなるため最優先
2. **ER図の詳細設計** → DB設計と並行して進める
3. **API設計・開発環境** → 設計が固まってから実装

**進捗メモ欄**
```
開始日: ____/____
完了予定: ____/____
備考: 
```

# その他、メモ
- ヒアリング：友人U
  - 資格勉強での課題点
    - 教材の中の章をどの順番で、どのくらいの粒度でやれば良いかがわからない。先人がどのように進めたかわかると嬉しい
    - その資格をとった人が他にとった資格などから、おすすめ資格を出してくれると嬉しい→ユーザーがこれまでに完了したプロジェクト-資格からレコメンデーションをできないか？
  - 教材が決まっているから、タスクの粒度が大きくて、プロジェクトータスク1つ（教材1つ）みたいになると、嬉しくない→プロジェクト＞教材＞タスク、みたいな中オブジェクトが必要か？

- 差別化要因
  - 同じタスクリストでどれだけの人が成果を上げたかがわかると、信じてタスクを進められる
  - 同じタスクリストに臨む人がいるとわかることでモチベーションの向上になる
  - タスク管理xコミュニティ
- ToDo
 - アクティビティはタイプを用意すると良いかも：プロジェクト完了、タスク完了、タスク進行、自由記述・・・
 - userローディング待ちをコンポーネント化 or キャッシュか
 - ダブルクリック防止ボタンコンポーネント

  // src/components/ui/SubmitButton.tsx
  interface SubmitButtonProps {
    onClick?: () => Promise<void>
    children: React.ReactNode
    loadingText?: string
    disabled?: boolean
    variant?: 'default' | 'outline' | 'destructive'
    // ...その他のButtonプロパティ
  }

  // 使用例
  <SubmitButton
    onClick={handleCreateTask}
    loadingText="作成中..."
  >
    作成
  </SubmitButton>
適用箇所:
  - ✅ タスク作成ボタン
  - 🔄 いいねボタン
  - 📝 活動投稿ボタン
  - 🗑️ 削除ボタン
  - 💾 プロジェクト作成ボタン


# バリデーション設計書 メモ
### 3.4 セキュリティバリデーション

#### 3.4.1 XSS対策
- 全ての入力項目でHTMLタグをエスケープ
- `<script>`タグ、`javascript:`スキームを禁止
- `onerror`、`onload`等のイベントハンドラを禁止

#### 3.4.2 SQLインジェクション対策
- Firestoreを使用するため基本的にリスクなし
- クエリパラメータの型チェックを実施

#### 3.4.3 認可チェック
- 全API呼び出し時に認証トークンを検証
- リソースの所有者チェック（自分のプロジェクト・タスクのみ操作可能）
- 公開設定に応じたデータアクセス制御

### 3.5 フロントエンド共通バリデーション

#### 3.5.1 リアルタイムバリデーション
- フォーカスアウト時にバリデーション実行
- 文字数カウンターのリアルタイム表示
- エラーメッセージの即座表示

#### 3.5.2 サブミット時バリデーション
- 全項目の再検証
- サーバーサイドバリデーションとの整合性チェック
- 重複送信防止

# WBS メモ
### 5.1 開発フェーズ全体計画

| フェーズ | 期間 | 工数(時間) | 重要度 | 依存関係 |
|---|---|---|---|---|
| **Phase1: 基盤構築** | 2週間 | 60時間 | Critical | - |
| **Phase2: 認証・ユーザー管理** | 1週間 | 30時間 | Critical | Phase1完了後 |
| **Phase3: プロジェクト・タスク管理** | 3週間 | 90時間 | Critical | Phase2完了後 |
| **Phase4: コミュニティ機能** | 2週間 | 60時間 | High | Phase3完了後 |
| **Phase5: UI/UX改善** | 1.5週間 | 45時間 | High | Phase4完了後 |
| **Phase6: テスト・デバッグ** | 1.5週間 | 45時間 | Critical | Phase5完了後 |
| **合計** | **11週間** | **330時間** | - | - |

### 5.2 Phase1: 基盤構築（2週間、60時間）

| タスクID | タスク名 | 工数 | デッドライン | 成果物 | 優先度 | 詳細 |
|---|---|---|---|---|---|---|
| P1-01 | 開発環境セットアップ | 8時間 | Day 2 | 環境構築ドキュメント | Critical | Next.js、Firebase、TailwindCSS |
| P1-02 | プロジェクト構造設計 | 6時間 | Day 3 | フォルダ構成ドキュメント | Critical | ファイル構成、命名規則 |
| P1-03 | Firebase設定 | 8時間 | Day 5 | Firebase設定完了 | Critical | Authentication、Firestore、Storage |
| P1-04 | 基本レイアウト実装 | 12時間 | Day 8 | 共通コンポーネント | High | Header、Footer、Navigation |
| P1-05 | ルーティング設定 | 6時間 | Day 10 | ページ遷移機能 | High | Next.js App Router設定 |
| P1-06 | エラーハンドリング基盤 | 8時間 | Day 12 | エラー処理ライブラリ | High | エラー境界、トースト通知 |
| P1-07 | 状態管理セットアップ | 8時間 | Day 14 | 状態管理設定 | High | Zustand or Redux Toolkit |
| P1-08 | TypeScript型定義 | 4時間 | Day 14 | 型定義ファイル | Medium | 基本的なインターフェース定義 |

### 5.3 Phase2: 認証・ユーザー管理（1週間、30時間）

| タスクID | タスク名 | 工数 | デッドライン | 成果物 | 優先度 | 詳細 |
|---|---|---|---|---|---|---|
| P2-01 | Firebase Auth設定 | 6時間 | Day 16 | 認証機能基盤 | Critical | Google OAuth設定 |
| P2-02 | ログイン画面実装 | 8時間 | Day 18 | ログイン画面 | Critical | UI実装、認証フロー |
| P2-03 | ユーザープロフィール機能 | 10時間 | Day 20 | プロフィール画面 | Critical | 表示・編集機能 |
| P2-04 | 認証ガード実装 | 4時間 | Day 21 | 認証保護機能 | High | ルート保護、リダイレクト |
| P2-05 | ユーザーデータ初期化 | 2時間 | Day 21 | 初期データ作成 | Medium | 新規ユーザー登録時処理 |

### 5.4 Phase3: プロジェクト・タスク管理（3週間、90時間）

| タスクID | タスク名 | 工数 | デッドライン | 成果物 | 優先度 | 詳細 |
|---|---|---|---|---|---|---|
| P3-01 | 資格マスターデータ作成 | 6時間 | Day 23 | 資格データ | Critical | Firestoreに資格情報登録 |
| P3-02 | 資格選択画面実装 | 12時間 | Day 26 | 資格選択UI | Critical | 一覧表示、フィルター機能 |
| P3-03 | プロジェクト作成機能 | 14時間 | Day 30 | プロジェクト作成 | Critical | テンプレートからプロジェクト生成 |
| P3-04 | タスク管理機能（基本CRUD） | 16時間 | Day 35 | タスク操作機能 | Critical | 作成・読取・更新・削除 |
| P3-05 | プロジェクトダッシュボード | 12時間 | Day 38 | 進捗表示画面 | High | 進捗率、統計情報表示 |
| P3-06 | タスク完了機能 | 8時間 | Day 40 | 完了処理 | High | 完了状態切り替え、進捗更新 |
| P3-07 | タスク並び替え機能 | 8時間 | Day 42 | ドラッグ&ドロップ | Medium | 順序変更機能 |
| P3-08 | バリデーション実装 | 6時間 | Day 42 | 入力検証 | High | フロント・バックエンド検証 |
| P3-09 | プロジェクト設定機能 | 8時間 | Day 42 | 設定画面 | Medium | 目標日設定、プロジェクト名変更 |

### 5.5 Phase4: コミュニティ機能（2週間、60時間）

| タスクID | タスク名 | 工数 | デッドライン | 成果物 | 優先度 | 詳細 |
|---|---|---|---|---|---|---|
| P4-01 | アクティビティデータ設計 | 4時間 | Day 44 | データベース設計 | High | アクティビティフィード設計 |
| P4-02 | 同じ資格挑戦者表示 | 10時間 | Day 47 | ユーザー一覧画面 | High | 進捗表示、フィルター機能 |
| P4-03 | アクティビティフィード実装 | 12時間 | Day 50 | フィード画面 | High | タイムライン表示 |
| P4-04 | いいね機能実装 | 8時間 | Day 52 | いいね機能 | High | いいね送信・取消 |
| P4-05 | タスク完了公開機能 | 8時間 | Day 54 | 公開設定 | High | 完了時の公開オプション |
| P4-06 | フォロー機能実装 | 10時間 | Day 56 | フォロー機能 | Medium | ユーザーフォロー・アンフォロー |
| P4-07 | 通知機能（基本） | 6時間 | Day 56 | 通知表示 | Medium | いいね通知 |
| P4-08 | コミュニティページ統合 | 2時間 | Day 56 | 統合画面 | Low | ナビゲーション統合 |

### 5.6 Phase5: UI/UX改善（1.5週間、45時間）

| タスクID | タスク名 | 工数 | デッドライン | 成果物 | 優先度 | 詳細 |
|---|---|---|---|---|---|---|
| P5-01 | レスポンシブデザイン対応 | 12時間 | Day 60 | モバイル対応 | High | スマホ・タブレット表示 |
| P5-02 | アニメーション実装 | 8時間 | Day 62 | 動的UI | Medium | ページ遷移、ホバーエフェクト |
| P5-03 | ローディング状態改善 | 6時間 | Day 64 | ローディングUI | High | スケルトン、スピナー |
| P5-04 | エラー画面デザイン | 4時間 | Day 65 | エラーページ | Medium | 404、500エラーページ |
| P5-05 | パフォーマンス最適化 | 8時間 | Day 66 | 高速化 | High | 画像最適化、コード分割 |
| P5-06 | アクセシビリティ対応 | 4時間 | Day 67 | a11y対応 | Medium | WAI-ARIA、キーボード操作 |
| P5-07 | デザインシステム統一 | 3時間 | Day 67 | スタイルガイド | Low | 色彩、フォント統一 |

### 5.7 Phase6: テスト・デバッグ（1.5週間、45時間）

| タスクID | タスク名 | 工数 | デッドライン | 成果物 | 優先度 | 詳細 |
|---|---|---|---|---|---|---|
| P6-01 | 単体テスト作成 | 12時間 | Day 70 | テストコード | High | Jest、React Testing Library |
| P6-02 | 結合テスト実施 | 8時間 | Day 72 | テスト結果 | High | API連携テスト |
| P6-03 | E2Eテスト実施 | 10時間 | Day 74 | E2Eテスト | Medium | Playwright使用 |
| P6-04 | セキュリティテスト | 6時間 | Day 75 | セキュリティ報告書 | High | 脆弱性検査 |
| P6-05 | パフォーマンステスト | 4時間 | Day 76 | 性能測定結果 | Medium | Lighthouse、負荷テスト |
| P6-06 | バグ修正・調整 | 5時間 | Day 77 | 修正版 | Critical | 発見された問題の修正 |

### 5.8 リスク管理・予備時間

| リスク項目 | 発生確率 | 影響度 | 対策 | 予備時間 |
|---|---|---|---|---|
| Firebase制限・料金問題 | Medium | High | 代替DB検討、制限監視 | 16時間 |
| 認証機能の複雑化 | Low | Medium | 認証ライブラリ使用 | 8時間 |
| パフォーマンス問題 | High | Medium | 早期テスト、最適化 | 12時間 |
| UI/UXの大幅修正 | Medium | Medium | 早期レビュー、段階的実装 | 10時間 |
| **合計予備時間** | - | - | - | **46時間** |

### 5.9 マイルストーン・デリバリ計画

| マイルストーン | 期限 | 成果物 | 確認項目 |
|---|---|---|---|
| **MVP完成** | Day 42 | 基本機能一式 | ログイン〜プロジェクト作成〜タスク管理 |
| **β版完成** | Day 56 | コミュニティ機能追加 | 全機能動作確認 |
| **製品版完成** | Day 77 | 最終版 | 全テスト完了、本番デプロイ準備 |

### 5.10 開発環境・ツール

| 分類 | ツール・技術 | 用途 | 習得時間 |
|---|---|---|---|
| **フロントエンド** | Next.js 14, React 18, TypeScript | メインフレームワーク | 既習 |
| **スタイリング** | TailwindCSS, Framer Motion | UI/アニメーション | 4時間 |
| **バックエンド** | Firebase (Auth, Firestore, Storage) | BaaS | 8時間 |
| **状態管理** | Zustand | 軽量状態管理 | 2時間 |
| **テスト** | Jest, React Testing Library, Playwright | テスト自動化 | 6時間 |
| **開発支援** | ESLint, Prettier, Husky | コード品質 | 2時間 |
| **デプロイ** | Vercel | ホスティング | 1時間 |

## 6. 補足資料

### 6.1 開発優先度の判断基準

| 優先度 | 基準 | 該当機能例 |
|---|---|---|
| **Critical** | システムの基本動作に必須 | 認証、プロジェクト作成、タスク管理 |
| **High** | ユーザー体験に大きく影響 | 進捗表示、コミュニティ機能 |
| **Medium** | あると良い機能 | ドラッグ&ドロップ、アニメーション |
| **Low** | 将来的な拡張機能 | 高度な統計、詳細設定 |

### 6.2 技術的負債・将来対応項目

| 項目 | 現状 | 将来対応 | 優先度 |
|---|---|---|---|
| 画像最適化 | 基本的な対応 | CDN、WebP対応 | Medium |
| オフライン対応 | 未対応 | Service Worker | Low |
| 多言語対応 | 日本語のみ | i18n導入 | Low |
| 高度な分析 | 基本的な進捗のみ | 学習時間分析、予測 | Low |
| 通知機能 | 画面内通知のみ | Push通知、メール | Medium |

この設計書に基づいて、段階的に開発を進めることで、確実に目標の機能を実現できます。特にPhase1〜3は基盤となる重要な部分なので、しっかりと時間をかけて実装することをお勧めします。


# テスト メモ

### 4.1 単体テスト（Unit Test）

#### 4.1.1 認証機能
| テストケース | 入力 | 期待結果 | 優先度 |
|---|---|---|---|
| 正常なGoogleログイン | 有効なIDトークン | ログイン成功、ユーザー情報取得 | High |
| 無効なトークンでログイン | 無効なIDトークン | AUTH001エラー | High |
| 期限切れトークン | 期限切れIDトークン | AUTH002エラー | High |
| 未認証でのAPI呼び出し | 認証ヘッダーなし | AUTH001エラー | High |

#### 4.1.2 バリデーション機能
| テストケース | 入力 | 期待結果 | 優先度 |
|---|---|---|---|
| 表示名の正常入力 | "山田太郎" | バリデーション成功 | High |
| 表示名の空文字 | "" | VALID001エラー | High |
| 表示名の文字数超過 | 51文字の文字列 | VALID002エラー | High |
| 表示名の特殊文字 | "山田<script>太郎" | VALID003エラー | High |
| 推定時間の正常値 | 5.5 | バリデーション成功 | High |
| 推定時間の範囲外 | 1000 | VALID002エラー | High |
| 推定時間の負の値 | -1 | VALID003エラー | High |

#### 4.1.3 プロジェクト管理機能
| テストケース | 入力 | 期待結果 | 優先度 |
|---|---|---|---|
| プロジェクト作成 | 有効な資格ID | プロジェクト作成成功 | High |
| 存在しない資格でプロジェクト作成 | 無効な資格ID | DATA004エラー | Medium |
| 進捗率計算（タスクなし） | 0個のタスク | 進捗率: 0% | High |
| 進捗率計算（一部完了） | 10個中3個完了 | 進捗率: 30% | High |
| 進捗率計算（全完了） | 5個中5個完了 | 進捗率: 100% | High |

### 4.2 結合テスト（Integration Test）

#### 4.2.1 ユーザーフロー全体テスト
| テストケース | 手順 | 期待結果 | 優先度 |
|---|---|---|---|
| 新規ユーザー登録〜プロジェクト作成 | 1.Googleログイン → 2.プロフィール設定 → 3.資格選択 → 4.プロジェクト作成 | 全て正常完了 | High |
| タスク完了〜進捗更新 | 1.タスク完了 → 2.進捗率更新 → 3.アクティビティ生成 | 進捗率正常更新、アクティビティ生成 | High |
| コミュニティ機能 | 1.タスク完了公開 → 2.他ユーザーがいいね → 3.通知生成 | いいね数増加、通知生成 | Medium |

#### 4.2.2 権限・セキュリティテスト
| テストケース | 手順 | 期待結果 | 優先度 |
|---|---|---|---|
| 他ユーザーのプロジェクトアクセス | 他ユーザーのプロジェクトIDでAPI呼び出し | AUTH003エラー | High |
| 非公開プロジェクトの表示 | isProgressPublic=falseのプロジェクト参照 | データ非表示 | High |
| XSS攻撃テスト | `<script>alert('xss')</script>`をタスク名に入力 | スクリプト実行されずエスケープ表示 | High |

### 4.3 E2Eテスト（End-to-End Test）

#### 4.3.1 ユーザーシナリオテスト
| テストケース | シナリオ | 期待結果 | 優先度 |
|---|---|---|---|
| 資格勉強開始シナリオ | ログイン→資格選択→プロジェクト作成→タスク追加→学習開始 | スムーズな操作でプロジェクト開始 | High |
| 学習継続シナリオ | タスク完了→進捗確認→他ユーザーの励まし→モチベーション向上 | コミュニティ機能による継続支援 | High |
| 資格合格シナリオ | 全タスク完了→進捗100%→合格報告→お祝い表示 | 達成感のある完了体験 | Medium |

#### 4.3.2 パフォーマンステスト
| テストケース | 条件 | 期待結果 | 優先度 |
|---|---|---|---|
| ページロード性能 | 初回アクセス | 3秒以内にページ表示完了 | High |
| 大量データ表示 | 100個のタスクを持つプロジェクト | スムーズなスクロール、遅延なし | Medium |
| 同時アクセス | 100人同時アクセス | レスポンス時間5秒以内 | Low |

#### 4.3.3 レスポンシブデザインテスト
| テストケース | デバイス | 期待結果 | 優先度 |
|---|---|---|---|
| PC表示 | 1920x1080 | デザイン崩れなし、全機能利用可能 | High |
| タブレット表示 | 768x1024 | レスポンシブ対応、タッチ操作対応 | Medium |
| スマートフォン表示 | 375x667 | モバイル最適化表示 | Medium |

### 4.4 性能テスト

#### 4.4.1 ロードテスト
| 項目 | 目標値 | 測定方法 | 優先度 |
|---|---|---|---|
| ページロード時間 | 3秒以内 | Lighthouse計測 | High |
| APIレスポンス時間 | 1秒以内 | 開発者ツール Network タブ | High |
| データベースクエリ時間 | 500ms以内 | Firebase Performance Monitoring | Medium |

#### 4.4.2 ストレステスト
| 項目 | 条件 | 期待結果 | 優先度 |
|---|---|---|---|
| 同時接続数 | 100ユーザー同時アクセス | エラー率5%以下 | Medium |
| データ量 | 1ユーザー1000タスク | 表示性能劣化なし | Low |
